@{
    ViewData["Title"] = "Claims System - Coordinator: View All Claims";
}

@model MonthlyClaimsSystem.Models.Claim

@{
    var isFirstReview = ViewBag.IsFirstReview as bool? ?? true;
}

<style>
    body {
        background-color: #121212;
        font-family: 'Segoe UI', sans-serif;
    }

    .claim-box {
        background-color: white;
        border-left: 6px solid #c82333;
        border-radius: 12px;
        padding: 30px;
        max-width: 600px;
        margin: auto;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        color: dimgray;
    }

        .claim-box h2 {
            color: black;
            margin-bottom: 20px;
        }

        .claim-box p {
            margin-bottom: 10px;
        }

    .btn {
        border-radius: 8px;
        font-weight: bold;
    }

    .btn-success {
        background-color: #28a745;
        border: none;
    }

    .btn-danger {
        background-color: #dc3545;
        border: none;
    }

    .btn-secondary {
        background-color: #444;
        color: white;
        border: none;
    }
</style>

<div class="claim-box mt-5">
    <h2>Claim Details</h2>

        <p><strong>Submitted:</strong> @Model.SubmittedAt.ToString("f")</p>
        <p><strong>Lecturer:</strong> @Model.Lecturer.Name @Model.Lecturer.Surname</p>
        <p><strong>Type:</strong> @Model.ClaimType</p>
        <p><strong>Month:</strong> @Model.ClaimMonth</p>
        <p><strong>Hours:</strong> @Model.HoursWorked</p>
        <p><strong>Rate:</strong> R @Model.HourlyRate/hr</p>
        <p><strong>Total:</strong> R @(Model.HoursWorked * Model.HourlyRate)</p>
        <p><strong>Notes:</strong> @Model.Notes</p>

            @if (isFirstReview)
            {
                <form method="post" asp-action="ApproveClaim">
                    <input type="hidden" name="id" value="@Model.ClaimId" />
                    <button type="submit" class="btn btn-success mt-3">Approve</button>
                </form>

                <form method="post" asp-action="DenyClaim">
                    <input type="hidden" name="id" value="@Model.ClaimId" />
                    <div class="form-group mt-3">
                        <label for="reason">Reason for Denial:</label>
                        <textarea name="reason" class="form-control" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-danger mt-2">Deny</button>
                </form>
            }

            @if (!isFirstReview)
            {
                <form method="post" asp-action="OverrideClaimStatus">
                    <input type="hidden" name="id" value="@Model.ClaimId" />
                    <div class="form-group mt-3">
                        <label for="newStatus">New Status:</label>
                        <select name="newStatus" class="form-control">
                            <option value="Approved">Approved</option>
                            <option value="Denied">Denied</option>
                            <option value="Pending">Pending</option>
                        </select>
                    </div>
                    <div class="form-group mt-2">
                        <label for="reason">Reason for Override:</label>
                        <textarea name="reason" class="form-control" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-warning mt-3">Override Status</button>
                </form>
            }
    <a class="btn btn-secondary mt-4" asp-controller="Coordinator" asp-action="Coordinator_PendingClaims">Back</a>
</div>

